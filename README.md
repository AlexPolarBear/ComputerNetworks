## Homework 3. ***Прикладной уровень***
## 2. Задачки
### Задание 1
Время, затраченное на весь путь будет равно сумме затраченного времени на каждом его отдельном участке + задержки.
С хоста А аналоговый сигнал преобразуется в цифровой и группируется в пакеты, на это тратится:

$$\{t_1=L_A/R_A=(56 * 8)/(128 * 10^3)=3.5 \quad мс;}$$

Пакет между хостами А и Б передается за время: 

$$\{t_2=L/a=(56 * 8)/(1 * 10^6)=0.448 \quad мс;}$$

Задержка распространения по условию $\{d=5 \quad мс}$. Итого, общее время:

$$\{t=t_1+t_2+d=3.5+0.448+5=8.948≈8.95 \quad мс.}$$

<ins>Ответ:</ins> $\{t=8.95 \quad мс.}$
### Задание 2
Выразим из формулы Литтла скорость поступления пакетов в очередь:

$$\{a=N/d=N/(d_{ожид}+d_{перед});}$$

Из формулы неизвестна только задержка передачи, найдем ее и подставим значением в формулу:

$$\{d_{перед}=L/R=1/100=0.01 \quad с;}$$

$$\{a=N/(d_{ожид}+d_{перед})=10/(0.01+0.01)=500 \quad пакет/с.}$$

<ins>Ответ:</ins> 500 пакет/секунд.
### Задание 3
а) Так как пакеты отправляются друг за другом, то при попадание в узкое место канала по первой линии связи второй пакет просто ставиться в очередь за первым. Тогда временная разница будет равна ожиданию передачи первого пакета по этому каналу (со скоростью $\{R_S}$), то есть:

$$\{t=L/R_S.}$$

б) Если вторая линия связи будет узким местом и отправка пакетов также посладовательна, то есть вероятность, что второй пакет поступит в очередь второй линии связи до того, как эта линия связи завершит передачу первого пакета:

$$\{L / R_{S} + L / R_{S} + d_{раср} < L / R_{S} + L / R_{C} + d_{раср};}$$

В левой части уравнения - время, необходимое второму пакету, чтобы встать в очередь второй линии связи. В правой части - время, необходимое первому пакету для завершения передачи по второй линии связи. А т.к. $\{R_S>R_C}$, то так и произойдет.

Чтобы избежать этого, второй пакет должен иметь задержку на $\{T}$ позже перед очередью второго канала, чем задержка второго пакета по второму каналу связи, т.е.:

$$\{L / R_{S} + T ≤ L / R_{C};}$$

$$\{T ≥ L / R_{C} - L / R_{S}.}$$
### Задание 4
а) Для объекта размером $\{L}$ время передачи по каналу связи со скорость $\{R=15 \quad Мбит/с}$ (на картинке) равно:

$$\{Δ = L / R = 850000 / (15 * 10^6) = 0.05667 сек = 56.7 \quad мс.}$$

б) Найдем среднее время задержки по формуле:

$$\{d = Δ / (1 - Δ * B) = 0.05667 / (1 - 0.05667 * 16) = 0.60714 \quad сек.}$$

Учитываем также время ожидания на маршрутизаторе $\{t=3 \quad сек}$. Итого, общее среднее время ответа будет равно:

$$\{T = d + t = 0.60714 + 3 = 3.61 \quad сек.}$$

с) Теперь когда часть объектов кэшируется, интенсивность очереди по каналу снизиться. Средняя задержка тоже уменьшиться и будет составлять только задержку для некэшируемых объектов:

$$\{d = 0.05667 / (1 - 0.05667 * 16 * 0.4) = 0.08891 \quad сек.}$$

Время ответа ≈ 0 при попадании запроса в кэш (что происходит с вероятностью 0.6). При промахе кэша ≈ 3 сек (что происходит с вероятностью 0.4). Тогда среднее время ответа будет равно:

$$\{T = (0.08891 + 3) * 0.4 + 0 * 0.6 = 1.236 \quad сек.}$$

<ins>Ответ:</ins> a) $\{Δ = 56.7 \quad мс;}$

б) $\{T = 3.61 \quad сек;}$

с) $\{T = 1.236 \quad сек.}$
